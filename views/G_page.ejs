<!DOCTYPE html>
<html lang="en">
    <!-- Headers -->
    <%- include('layouts/header'); -%>

    <body>
        <!-- Navigation-->
        <%- include('layouts/navbar'); -%>

        <!-- Page Header-->
        <header class="masthead" style="background-image: url('assets/img/post-bg.jpg')">
            <div class="container position-relative px-4 px-lg-5">
                <div class="row gx-4 gx-lg-5 justify-content-center">
                    <div class="col-md-10 col-lg-8 col-xl-7">
                        <div class="post-heading">
                            <h1>G Test</h1>
                            <h2 class="subheading">G test is the final test need to grab the G license.</h2>
                            <span class="meta">
                                Posted by
                                <a href="#!">Mohit Kataria</a>
                                on October 07, 2022
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </header>
      
        <main class="mb-4">
            <div class="container px-4 px-lg-5">
                <div class="row gx-4 gx-lg-5 justify-content-center">
                    <div class="col-md-10 col-lg-8 col-xl-7">
                        <div class="my-5">
                            <h2>Please enter your license number</h2>
                            <form id="contactForm" data-sb-form-api-token="API_TOKEN" action="/fetchUser" method="get">
                                <div class="form-floating">
                                    <input class="form-control" id="licenseNumber" name="licenseNumber" type="text" placeholder="Enter your license number" data-sb-validations="required" />
                                    <label for="name">License Number</label>
                                    <div class="invalid-feedback" data-sb-feedback="name:required">Must be 8 characters.</div>
                                </div>
                                <br>
                                <button class="btn btn-primary text-uppercase" id="submitButton" type="submit">Submit</button>
                            </form>
                            <br>

                            <% if(typeof G2User != "undefined"){ %>
                                <% if(G2User == null){ %>
                                    <p style="font-size: 25px; font-weight: bold; color: red;">User not found !</p>
                                    <% } else { %>
                                    <u style="font-size: 25px; font-weight: bold;">User Details</u>
                                    <form id="contactForm" data-sb-form-api-token="API_TOKEN" action="/updateUser" method="post">
                                        <div class="form-floating">
                                            <input class="form-control" type="text" name="firstName" readonly value="<%= G2User.firstName %>">
                                            <label for="name">First Name</label>
                                        </div>
                                    
                                        <div class="form-floating">
                                            <input class="form-control" type="text" name="lastName" readonly value="<%= G2User.lastName %>">
                                            <label>Last Name</label>
                                        </div>
                                        
                                        <div class="form-floating">
                                            <input class="form-control" type="text" name="licenseNumber" readonly value="<%= G2User.licenseNumber %>">
                                            <label>License Number</label>
                                        </div>

                                        <div class="form-floating">
                                            <input class="form-control" type="number" name="age" readonly value="<%= G2User.age %>">
                                            <label>Age</label>
                                        </div>
                                    
                                        <div class="form-floating">
                                            <input class="form-control" type="text" name="dob" readonly value="<%= new Date(G2User.dob).toDateString() %>">
                                            <label>DOB</label>
                                        </div>
                                        
                                        <br>
                                        <u style="font-size: 25px; font-weight: bold;">Car Details</u> <span style="margin-left: 10px;">(Editable field)</span>
                                        <div class="form-floating">
                                            <input class="form-control" type="text" name="carDetails[make]" value="<%= G2User.carDetails.make %>">
                                            <label>Make</label>
                                        </div>

                                        <div class="form-floating">
                                            <input class="form-control" type="text" name="carDetails[model]" value="<%= G2User.carDetails.model %>">
                                            <label>Model</label>
                                        </div>
                                        
                                        <div class="form-floating">
                                            <input class="form-control" type="text" name="carDetails[year]" value="<%= G2User.carDetails.year %>">
                                            <label>Year</label>
                                        </div>
                                        
                                        <div class="form-floating">
                                            <input class="form-control" type="text" name="carDetails[plateNumber]" value="<%= G2User.carDetails.plateNumber %>">
                                            <label>Plate Number</label>
                                        </div>
                                        <br>
                                        <button class="btn btn-primary text-uppercase" id="submitButton" type="submit">Update</button>
                                    </form>
                                <% } %> 
                            <% }%>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Footer-->
        <%- include('layouts/footer'); -%>

        <!-- Scripts -->
        <%- include('layouts/scripts'); -%>
    </body>
</html>
